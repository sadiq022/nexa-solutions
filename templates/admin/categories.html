{% extends "layouts/base.html" %}

{% block content %}
<div style="
    max-width: 900px;
    margin: 120px auto;
    background: #fff;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(31,60,136,.08);
">

    <h1 style="
        font-size: 28px;
        margin-bottom: 30px;
        color: #0B1C3D;
    ">
        Manage Categories
    </h1>

    <!-- ADD CATEGORY -->
    <form method="POST" style="display:flex; gap:15px; margin-bottom:40px;">
        <input
            type="text"
            name="name"
            placeholder="Category name"
            required
            style="
                flex:1;
                padding:14px 16px;
                border-radius:12px;
                border:2px solid #E0E7FF;
                font-size:15px;
            "
        >
        <button type="submit" style="
            background:#4D7CFE;
            color:#fff;
            padding:14px 26px;
            border-radius:12px;
            font-weight:600;
            border:none;
            cursor:pointer;
        ">
            Add
        </button>
    </form>

    <!-- CATEGORY LIST -->
    {% if categories %}
    <table style="width:100%; border-collapse:collapse;">
        <thead>
            <tr style="background:#F8FAFF;">
                <th style="padding:14px; text-align:left;">Category</th>
                <th style="padding:14px; text-align:center;">Blogs</th>
                <th style="padding:14px; text-align:right;">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for category in categories %}
            <tr style="border-bottom:1px solid #EAF0FF;">
                <td style="padding:14px; font-weight:600;">
                    {{ category.name }}
                </td>

                <td style="padding:14px; text-align:center;">
                    {{ category.posts|length }}
                </td>

                <td style="padding:14px; text-align:right;">
                    <form
                        method="POST"
                        action="{{ url_for('admin.delete_category', id=category.id) }}"
                        onsubmit="return confirm('Delete this category?');"
                        style="display:inline;"
                    >
                        <button type="submit" style="
                            background:none;
                            border:none;
                            color:#E53935;
                            font-weight:600;
                            cursor:pointer;
                        ">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p style="color:#3E4C6A;">No categories yet.</p>
    {% endif %}

</div>
{% endblock %}
